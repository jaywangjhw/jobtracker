{% extends "jobs/base.html" %}

{% block content %}

<div class="container h-100 mt-5">
	<div class="container ml-3 mb-5">
		<div class="row mt-3">
			<div class="col-md-auto">
				<h2>{{ app.position }}</h2>
			</div>
		</div>
		<div class="row mt-3">
			<div class="col-md-auto">
				<p>Application started on {{ app.date_started }}</p>
				{% if app.date_submitted %}
					<p>Status: Submited on {{ app.date_submitted }}</p>
					{% if app.offer %}
						<p>Offer received</p>
					{% endif %}
					{% if app.accepted %}
						<p>You have accepted this job offer!</p>
					{% endif %}
				{% else %}
					<p>Status: Not submitted yet</p>
				{% endif %}
				<p>Email used for this application: {{ app.email_used }}</p>
				<p>{{ app.notes }}</p>
			</div>
		</div>
		<div class="row mt-5">
			<div class="col">
				<h3>Interviews:</h3>
				<a class="btn btn-primary mb-3" href="{% url 'jobs-new-interview' app.id %}">Add Interview</a>
				{% if interviews %}
				<table class="table mb-5">
					<thead class="thead-dark">
						<tr>
							<th scope="col" style="width: 10%">Date</th>
							<th scope="col" style="width: 10%">Time</th>
							<th scope="col" style="width: 15%">Location</th>
							<th scope="col" style="width: 8%">URL</th>
							<th scope="col" style="width: 15%">Status</th>
							<th scope="col">Notes</th>
							<th scope="col" class="text-center" style="width: 10%">Update/Delete</th>
						</tr>
					</thead>
					<tbody>
					{% for interview in interviews %}
						<tr>
							<td>{{ interview.date }}</td>
							<td>{{ interview.time }}</td>
							<td>{{ interview.location }}</td>
							{% if interview.virtual_url %}
								<td><a href="{{ interview.virtual_url }}">Link</a></td>
							{% else %}
								<td>N/A</td>
							{% endif %}
							{% if interview.complete %}
								<td>Completed</td>
							{% else %}
								<td>
									<a class="btn btn-primary" href="#" role="button">Complete</a>
								</td>
							{% endif %}
							<td>{{ interview.notes }}</td>
							<td class="text-right">
								<a class="btn btn-primary" href="{% url 'jobs-update-interview' app.id interview.id %}" role="button">Edit</a>
								<a class="btn btn-danger" href="{% url 'jobs-delete-interview' app.id interview.id %}" role="button">  X  </a>
							</td>
						</tr>
					{% endfor %}
					</tbody>
				</table>
				{% endif %}
			</div>
		</div>

		{% if assessments %}
			<div class="row mt-3">
				<div class="col-md-auto">
					<h4>Assessments</h4>
					{% for assessment in assessments %}
						<p>Date: {{ assessment.date }}</p>
					{% endfor %}
				</div>
			</div>
		{% endif %}
		<div class="row mt-5">
			<div class="col">
				<h3>Communication related to this Application:</h3>
				<a class="btn btn-primary mb-3" href="{% url 'jobs-new-communication' %}?application={{ app.id }}">Add Communication</a>
				{% if communications %}
				<table class="table mb-5">
					<thead class="thead-dark">
						<tr>
							<th scope="col" style="width: 15%">Contact</th>
							<th scope="col" style="width: 15%">Date</th>
							<th scope="col" style="width: 12%">Method</th>
							<th scope="col">Notes</th>
							<th scope="col" class="text-center" style="width: 10%">Update/Delete</th>
						</tr>
					</thead>
					<tbody>
					{% for comm in communications %}
						<tr>
							<td>{{ comm.contact }}</td>
							<td>{{ comm.date }}</td>
							<td>{{ comm.method }}</td>
							<td>{{ comm.notes }}</td>
							<td class="text-right">
								<a class="btn btn-primary" href="{% url 'jobs-update-communication' comm.id %}" role="button">Edit</a>
								<a class="btn btn-danger" href="{% url 'jobs-delete-communication' comm.id %}" role="button">  X  </a>
							</td>
						</tr>
					{% endfor %}
					</tbody>
				</table>
				{% endif %}
			</div>
		</div>
	</div>
</div>

{% endblock content %}
